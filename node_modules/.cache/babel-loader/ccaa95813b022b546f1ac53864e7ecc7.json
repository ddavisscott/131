{"remainingRequest":"/Users/FOXDIE/Documents/131/node_modules/babel-loader/lib/index.js!/Users/FOXDIE/Documents/131/node_modules/eslint-loader/index.js??ref--13-0!/Users/FOXDIE/Documents/131/src/store/store.js","dependencies":[{"path":"/Users/FOXDIE/Documents/131/src/store/store.js","mtime":1559420213303},{"path":"/Users/FOXDIE/Documents/131/node_modules/cache-loader/dist/cjs.js","mtime":1559591250236},{"path":"/Users/FOXDIE/Documents/131/node_modules/babel-loader/lib/index.js","mtime":1559591250115},{"path":"/Users/FOXDIE/Documents/131/node_modules/eslint-loader/index.js","mtime":1559591250950}],"contextDependencies":[],"result":["import _objectSpread from \"/Users/FOXDIE/Documents/131/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport \"core-js/modules/es6.function.name\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport firebase from 'firebase';\nimport 'firebase/firestore';\nimport router from '@/routes';\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    user: null,\n    userProfile: null\n  },\n  mutations: {\n    updateUser: function updateUser(state, _ref) {\n      var user = _ref.user;\n      Vue.set(state, 'user', user);\n    },\n    setUser: function setUser(state, payload) {\n      state.user = payload;\n    },\n    setProfile: function setProfile(state, payload) {\n      state.userProfile = payload;\n    },\n    setLoading: function setLoading(state, payload) {\n      state.loading = payload;\n    },\n    setError: function setError(state, payload) {\n      state.error = payload;\n    },\n    clearError: function clearError(state) {\n      state.error = null;\n    }\n  },\n  getters: {\n    user: function user(state) {\n      return state.user;\n    },\n    userProfile: function userProfile(state) {\n      return state.userProfile;\n    }\n  },\n  computed: {},\n  actions: {\n    signUserUp: function signUserUp(_ref2, payload) {\n      var _this = this;\n\n      var commit = _ref2.commit;\n      firebase.auth().createUserWithEmailAndPassword(payload.email, payload.password).then(function (user) {\n        var newUser = {\n          id: user.user.uid\n        };\n        commit('setUser', newUser);\n      }).then( // eslint-disable-next-line\n      function (user) {\n        var dateNow = new Date();\n        firebase.firestore().collection(\"users\").doc(_this.state.user.id).set({\n          userLevel: 'free',\n          joinDate: dateNow.toISOString(),\n          isAdmin: false\n        });\n      }).then(router.push('/profile')).catch(function (error) {\n        commit('setError', error);\n      });\n    },\n    signUserOut: function signUserOut(_ref3) {\n      var commit = _ref3.commit;\n      commit('setProfile', null);\n    },\n    fetchUserData: function fetchUserData(_ref4) {\n      var commit = _ref4.commit,\n          getters = _ref4.getters;\n      var currentUser = this.state.user.uid;\n      commit('setLoading', true);\n      var docRef = firebase.firestore().collection('/users').doc(currentUser);\n      docRef.get().then(function (doc) {\n        if (doc.exists) {\n          commit('setProfile', doc.data());\n        } else {\n          this.state.usersProfile = null;\n        }\n      }).catch(function (error) {\n        commit('setLoading', false);\n        commit('setError', error);\n      });\n    },\n    updateUserData: function updateUserData(_ref5, payload) {\n      var commit = _ref5.commit;\n      commit('setLoading', true);\n      var updateUserObj = {};\n      var filename;\n      var ext;\n      console.log('PAYLOAD', payload);\n\n      if (payload.firstName) {\n        updateUserObj.firstName = payload.firstName;\n      }\n\n      if (payload.lastName) {\n        updateUserObj.lastName = payload.lastName;\n      }\n\n      if (payload.avatar) {\n        updateUserObj.avatar = payload.avatar;\n      }\n\n      if (payload.currency) {\n        updateUserObj.currency = payload.currency;\n      }\n\n      if (payload.location) {\n        updateUserObj.location = payload.location;\n      }\n\n      if (payload.timeZone) {\n        updateUserObj.timeZone = payload.timeZone;\n      }\n\n      if (payload.longitude) {\n        updateUserObj.longitude = payload.longitude;\n      }\n\n      if (payload.latitude) {\n        updateUserObj.latitude = payload.latitude;\n      }\n\n      if (payload.language) {\n        updateUserObj.language = payload.language;\n      }\n\n      if (payload.updated) {\n        updateUserObj.updated = payload.updated;\n      }\n\n      if (payload.image) {\n        filename = payload.image.name;\n        ext = filename.slice(filename.lastIndexOf('.'));\n        updateUserObj.imageExt = ext;\n      }\n\n      var imageUrl;\n      var key = firebase.auth().currentUser.uid;\n      var userRef = firebase.firestore().collection('users').doc(firebase.auth().currentUser.uid);\n      var setWithMerge = userRef.set(_objectSpread({}, updateUserObj), {\n        merge: true\n      }).then(function () {\n        return firebase.storage().ref('users/' + key + ext).put(payload.image);\n      }).then(function () {\n        commit('setLoading', false);\n        console.log('This is the push of the USER payload', payload); // commit('updateUser', payload)\n      }).catch(function (error) {\n        console.log(error);\n        commit('setLoading', false);\n      });\n      console.log('at the end of the loop');\n    }\n  }\n});",{"version":3,"sources":["/Users/FOXDIE/Documents/131/src/store/store.js"],"names":["Vue","Vuex","firebase","router","use","Store","state","user","userProfile","mutations","updateUser","set","setUser","payload","setProfile","setLoading","loading","setError","error","clearError","getters","computed","actions","signUserUp","commit","auth","createUserWithEmailAndPassword","email","password","then","newUser","id","uid","dateNow","Date","firestore","collection","doc","userLevel","joinDate","toISOString","isAdmin","push","catch","signUserOut","fetchUserData","currentUser","docRef","get","exists","data","usersProfile","updateUserData","updateUserObj","filename","ext","console","log","firstName","lastName","avatar","currency","location","timeZone","longitude","latitude","language","updated","image","name","slice","lastIndexOf","imageExt","imageUrl","key","userRef","setWithMerge","merge","storage","ref","put"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport firebase from 'firebase'\nimport 'firebase/firestore';\nimport router from '@/routes'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n    user: null,\n    userProfile: null\n  },\n  mutations: {\n    updateUser (state, { user }) {\n      Vue.set(state, 'user', user)\n    },\n    setUser (state, payload) {\n      state.user = payload\n    },\n    setProfile (state, payload) {\n      state.userProfile = payload\n    },\n    setLoading (state, payload) {\n      state.loading = payload\n    },\n    setError (state, payload) {\n      state.error = payload\n    },\n    clearError (state) {\n      state.error = null\n    }\n  },\n  getters: {\n    user (state) {\n      return state.user\n    },\n    userProfile (state) {\n      return state.userProfile\n    }\n  },\n  computed: {\n  },\n  actions: {\n    signUserUp ({commit}, payload) {\n      firebase.auth().createUserWithEmailAndPassword(payload.email, payload.password)\n      .then(\n        user => {\n          const newUser = {\n            id: user.user.uid\n          }\n          commit('setUser', newUser)\n        }\n      )\n      .then(\n        // eslint-disable-next-line\n        user => {\n          const dateNow = new Date()\n          firebase.firestore().collection(\"users\").doc(this.state.user.id).set({\n            userLevel: 'free',\n            joinDate: dateNow.toISOString(),\n            isAdmin: false\n          })\n        }\n      )\n      .then(\n        router.push('/profile')\n      )\n      .catch(function(error) {\n        commit('setError', error)\n      })\n    },\n    signUserOut ({commit}) {\n      commit('setProfile', null)\n    },\n    fetchUserData ({commit, getters}) {\n      let currentUser = this.state.user.uid\n      commit('setLoading', true)\n      var docRef = firebase.firestore().collection('/users').doc(currentUser)\n      docRef.get().then(function(doc) {\n        if (doc.exists) {\n          commit('setProfile', doc.data())\n        } else {\n          this.state.usersProfile = null\n        }\n      })\n      .catch(\n        error => {\n          commit('setLoading', false)\n          commit('setError', error)\n        }\n      )\n    },\n    updateUserData ({commit}, payload) {\n      commit('setLoading', true)\n      const updateUserObj = {}\n      let filename\n      let ext\n      console.log('PAYLOAD', payload)\n      if (payload.firstName) {\n        updateUserObj.firstName = payload.firstName\n      }\n      if (payload.lastName) {\n        updateUserObj.lastName = payload.lastName\n      }\n      if (payload.avatar) {\n        updateUserObj.avatar = payload.avatar\n      }\n      if (payload.currency) {\n        updateUserObj.currency = payload.currency\n      }\n      if (payload.location) {\n        updateUserObj.location = payload.location\n      }\n      if (payload.timeZone) {\n        updateUserObj.timeZone = payload.timeZone\n      }\n      if (payload.longitude) {\n        updateUserObj.longitude = payload.longitude\n      }\n      if (payload.latitude) {\n        updateUserObj.latitude = payload.latitude\n      }\n      if (payload.language) {\n        updateUserObj.language = payload.language\n      }\n      if (payload.updated) {\n        updateUserObj.updated = payload.updated\n      }\n      if (payload.image) {\n        filename = payload.image.name\n        ext = filename.slice(filename.lastIndexOf('.'))\n        updateUserObj.imageExt = ext\n      }\n\n      let imageUrl\n      let key = firebase.auth().currentUser.uid\n      let userRef = firebase.firestore().collection('users').doc(firebase.auth().currentUser.uid)\n      let setWithMerge = userRef.set({\n        ...updateUserObj\n      }, { merge: true })\n        .then(() => {\n          return firebase.storage().ref('users/' + key + ext).put(payload.image)\n        })\n      .then(() => {\n        commit('setLoading', false)\n        console.log('This is the push of the USER payload', payload)\n        // commit('updateUser', payload)\n      })\n      .catch(error => {\n        console.log(error)\n        commit('setLoading', false)\n      })\n      console.log('at the end of the loop')\n    }\n  }\n})\n"]}]}